# USFitness Lab API Documentation

## API Endpoints

### Dashboard API (`/api/dashboard_api.php`)
- **GET/POST** `?action=get_counts` - Get dashboard statistics
  - Returns: total_patients, todays_orders, pending_results, total_doctors
- **GET/POST** `?action=get_recent_activities` - Get recent activities 
  - Params: limit (default: 10)
- **GET/POST** `?action=get_recent_orders` - Get recent test orders
  - Params: limit (default: 10)
- **GET/POST** `?action=get_monthly_stats` - Get monthly statistics for charts

### Patients API (`/api/patients_api.php`)
- **POST** `action=list` - Get patients list (DataTables)
  - Params: draw, start, length, search
  - Returns: DataTables format response
- **GET** `action=add_form` - Get add patient form HTML
- **GET** `action=edit_form&id=X` - Get edit patient form HTML
- **GET** `action=view&id=X` - Get patient details view HTML
- **POST** `action=save` - Save patient (add/update)
  - Fields: id (for update), name*, email, phone, date_of_birth, gender
- **POST** `action=delete&id=X` - Delete patient

### Doctors API (`/api/doctors_api.php`)
- **POST** `action=list` - Get doctors list (DataTables)
- **GET** `action=add_form` - Get add doctor form HTML
- **GET** `action=edit_form&id=X` - Get edit doctor form HTML  
- **GET** `action=view&id=X` - Get doctor details view HTML
- **POST** `action=save` - Save doctor (add/update)
  - Fields: id, name*, email, phone, specialization, license_number
- **POST** `action=delete&id=X` - Delete doctor

### Test Orders API (`/api/test_orders_api.php`)
- **POST** `action=list` - Get test orders list (DataTables)
- **GET** `action=add_form` - Get add test order form HTML
- **GET** `action=edit_form&id=X` - Get edit test order form HTML
- **GET** `action=view&id=X` - Get test order details view HTML
- **POST** `action=save` - Save test order (add/update)
  - Fields: id, order_number*, patient_id*, doctor_id, status
- **POST** `action=delete&id=X` - Delete test order

### Users API (`/api/users_api.php`)
- **POST** `action=list` - Get users list (DataTables)
- **GET** `action=add_form` - Get add user form HTML
- **GET** `action=edit_form&id=X` - Get edit user form HTML
- **POST** `action=save` - Save user (add/update)
  - Fields: id, username*, email*, password (for new), role
- **POST** `action=delete&id=X` - Delete user

## AJAX Files (`/ajax/`)

### Patients AJAX (`/ajax/patients_datatable.php`)
- DataTables server-side processing for patients

### Doctors AJAX (`/ajax/doctors_datatable.php`)
- DataTables server-side processing for doctors

### Test Orders AJAX (`/ajax/test_orders_datatable.php`)
- DataTables server-side processing for test orders

### Users AJAX (`/ajax/users_datatable.php`)
- DataTables server-side processing for users

## Response Format

### Success Response
```json
{
    "success": true,
    "message": "Operation completed successfully",
    "data": {...}
}
```

### Error Response
```json
{
    "success": false,
    "message": "Error description"
}
```

## Important Fields Only

### Patient Fields
- name* (required)
- email
- phone  
- date_of_birth
- gender

### Doctor Fields
- name* (required)
- email
- phone
- specialization
- license_number

### Test Order Fields
- order_number* (auto-generated)
- patient_id* (required)
- doctor_id
- status (pending, processing, completed, cancelled)

### User Fields
- username* (required)
- email* (required)
- password* (for new users)
- role (admin, staff)

## Table Columns (Important Only)

### Patients Table
- ID, Name, Email, Phone, Gender, Actions

### Doctors Table  
- ID, Name, Email, Specialization, Actions

### Test Orders Table
- Order#, Patient, Doctor, Status, Date, Actions

### Users Table
- ID, Username, Email, Role, Actions